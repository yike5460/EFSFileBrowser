<!-- based on template https://github.com/zhaoxuhui1122/vue-json-view -->
<html>
<head>
<script type="application/json" id="section1JSON">
    {
        "name": "demo",
        "member": [
            {
                "name": "VTc1CGaAph.txt",
                "size": "32 bytes"
            },
            {
                "name": "BZjvHa0pEx.txt",
                "size": "20 bytes"
            },
            {
                "name": "HBtCq0.txt",
                "size": "27 bytes"
            },
            {
                "name": "RQwYLlo2F.txt",
                "size": "40 bytes"
            },
            {
                "name": "r947CIqHW.txt",
                "size": "30 bytes"
            },
            {
                "name": "4J17NHfsal.txt",
                "size": "23 bytes"
            },
            {
                "name": "HyQsjnE.txt",
                "size": "27 bytes"
            },
            {
                "name": "tpxoAWqhBaS.txt",
                "size": "35 bytes"
            },
            {
                "name": "SUcOITd7.txt",
                "size": "37 bytes"
            },
            {
                "name": "xCYJIDKVn7q.txt",
                "size": "38 bytes"
            },
            {
                "name": "xDRMq8f3bs.txt",
                "size": "43 bytes"
            },
            {
                "name": "d2Q5THpJ.txt",
                "size": "22 bytes"
            },
            {
                "name": "tVB9gMihQTK.txt",
                "size": "33 bytes"
            },
            {
                "name": "WvslFG8Tq4.txt",
                "size": "25 bytes"
            },
            {
                "name": "Be7COoNYqQhZ.txt",
                "size": "26 bytes"
            },
            {
                "name": "TpnfXQI.txt",
                "size": "39 bytes"
            },
            {
                "name": "EXgO9r4jkc.txt",
                "size": "25 bytes"
            },
            {
                "name": "0UiC9.txt",
                "size": "28 bytes"
            },
            {
                "name": "tPfuTW.txt",
                "size": "34 bytes"
            },
            {
                "name": "2i7ZNjp6P.txt",
                "size": "38 bytes"
            },
            {
                "name": "ErDhpJ0CdXai.txt",
                "size": "24 bytes"
            },
            {
                "name": "A6lZXtm.txt",
                "size": "34 bytes"
            },
            {
                "name": "WVx9Rh8Ic5U.txt",
                "size": "20 bytes"
            },
            {
                "name": "nlzDZqO4.txt",
                "size": "40 bytes"
            },
            {
                "name": "kWyZ8Ycv7.txt",
                "size": "26 bytes"
            },
            {
                "name": "1jNTfC9gZV.txt",
                "size": "27 bytes"
            },
            {
                "name": "RKX6cxYu9WJ8.txt",
                "size": "24 bytes"
            },
            {
                "name": "H8CbUl.txt",
                "size": "31 bytes"
            },
            {
                "name": "TZn2wS9UquJ.txt",
                "size": "31 bytes"
            },
            {
                "name": "noXs2Yz9.txt",
                "size": "21 bytes"
            },
            {
                "name": "t9esxTmLD7q.txt",
                "size": "45 bytes"
            },
            {
                "name": "someFile",
                "size": "0 bytes"
            },
            {
                "name": "9gxkdG.txt",
                "size": "27 bytes"
            },
            {
                "name": "jz3yVH.txt",
                "size": "28 bytes"
            },
            {
                "name": "hXeb7.txt",
                "size": "35 bytes"
            },
            {
                "name": "GCuOBRL.txt",
                "size": "37 bytes"
            },
            {
                "name": "5Vz9JdreS8.txt",
                "size": "23 bytes"
            },
            {
                "name": "ltzGDJYV.txt",
                "size": "31 bytes"
            },
            {
                "name": "mbYvkaT.txt",
                "size": "24 bytes"
            },
            {
                "name": "UthVFs0n.txt",
                "size": "41 bytes"
            },
            {
                "name": "AzG6Ow.txt",
                "size": "30 bytes"
            },
            {
                "name": "dAwxVagEm.txt",
                "size": "27 bytes"
            },
            {
                "name": "Mg9dAzwJ7.txt",
                "size": "38 bytes"
            },
            {
                "name": "pvyzBi.txt",
                "size": "43 bytes"
            },
            {
                "name": "RwMNWY.txt",
                "size": "21 bytes"
            },
            {
                "name": "fiA2pPrvcJUx.txt",
                "size": "34 bytes"
            },
            {
                "name": "hRe7EpHj6A.txt",
                "size": "34 bytes"
            },
            {
                "name": "dUewE2H.txt",
                "size": "37 bytes"
            },
            {
                "name": "VFBmethgdwbT.txt",
                "size": "45 bytes"
            },
            {
                "name": "F5bUceNLp.txt",
                "size": "43 bytes"
            },
            {
                "name": "IqfrDwsc0P9x.txt",
                "size": "31 bytes"
            },
            {
                "name": "rhE2ABujOGK.txt",
                "size": "46 bytes"
            },
            {
                "name": "s05So94Rgd.txt",
                "size": "34 bytes"
            },
            {
                "name": "0w6nMIHkEc.txt",
                "size": "25 bytes"
            },
            {
                "name": "HcLhDq5C.txt",
                "size": "32 bytes"
            },
            {
                "name": "6ZXNGvrhOnR.txt",
                "size": "25 bytes"
            },
            {
                "name": "Fio.0.0",
                "size": "1073741824 bytes"
            },
            {
                "name": "GNaw7Vr.txt",
                "size": "35 bytes"
            },
            {
                "name": "yMuFTND0W9vo.txt",
                "size": "26 bytes"
            },
            {
                "name": "9KuM0xXsfW6.txt",
                "size": "32 bytes"
            },
            {
                "name": "EqoOx.txt",
                "size": "21 bytes"
            },
            {
                "name": "0rYH4yL.txt",
                "size": "23 bytes"
            },
            {
                "name": "e4juR7xc.txt",
                "size": "43 bytes"
            },
            {
                "name": "TSDFhs.txt",
                "size": "44 bytes"
            },
            {
                "name": "yzSHBi9J8h.txt",
                "size": "31 bytes"
            },
            {
                "name": "2mSYgIOys8ZD.txt",
                "size": "38 bytes"
            },
            {
                "name": "kn8F7bWytH.txt",
                "size": "37 bytes"
            },
            {
                "name": "z6d1jme5USq9.txt",
                "size": "25 bytes"
            },
            {
                "name": "ZM5giQUpc4O.txt",
                "size": "30 bytes"
            },
            {
                "name": "LAxaDbG80m.txt",
                "size": "35 bytes"
            },
            {
                "name": "km97H45hQ3c.txt",
                "size": "33 bytes"
            },
            {
                "name": "zegvl0UK.txt",
                "size": "37 bytes"
            },
            {
                "name": "MmUjpYHg7.txt",
                "size": "27 bytes"
            },
            {
                "name": "JjXyq2.txt",
                "size": "22 bytes"
            },
            {
                "name": "yaeNKjP4b.txt",
                "size": "28 bytes"
            },
            {
                "name": "DOEx6IXqp.txt",
                "size": "21 bytes"
            },
            {
                "name": "m6vtK.txt",
                "size": "36 bytes"
            },
            {
                "name": "Cvyk4mbx.txt",
                "size": "40 bytes"
            },
            {
                "name": "random_file123",
                "size": "10 bytes"
            },
            {
                "name": "K7vkJFMUcpqo.txt",
                "size": "33 bytes"
            },
            {
                "name": "NVTbcCx.txt",
                "size": "23 bytes"
            },
            {
                "name": "n0KSh8jyi.txt",
                "size": "26 bytes"
            },
            {
                "name": "4tPFfC57vzYl.txt",
                "size": "40 bytes"
            },
            {
                "name": "BNdxT.txt",
                "size": "38 bytes"
            },
            {
                "name": "zJMjE.txt",
                "size": "34 bytes"
            },
            {
                "name": "1sytDLVhwz.txt",
                "size": "46 bytes"
            },
            {
                "name": "2VT1W94jghdr.txt",
                "size": "40 bytes"
            },
            {
                "name": "oT4feFWxVAr.txt",
                "size": "30 bytes"
            },
            {
                "name": "dUQo39MriRkV.txt",
                "size": "40 bytes"
            },
            {
                "name": "co3DSaCHmk.txt",
                "size": "22 bytes"
            },
            {
                "name": "mQrfI57J9B.txt",
                "size": "27 bytes"
            },
            {
                "name": "Lb6Bpz.txt",
                "size": "24 bytes"
            },
            {
                "name": "apkfdj.txt",
                "size": "29 bytes"
            },
            {
                "name": "4m06NesuHY.txt",
                "size": "41 bytes"
            },
            {
                "name": "QR5zuSL9aUn.txt",
                "size": "20 bytes"
            },
            {
                "name": "lTDHv7dAnOhP.txt",
                "size": "36 bytes"
            },
            {
                "name": "ZwqQk9prbX.txt",
                "size": "24 bytes"
            },
            {
                "name": "TcmIPubO.txt",
                "size": "31 bytes"
            },
            {
                "name": "XlaPA49W7B.txt",
                "size": "21 bytes"
            },
            {
                "name": "FqcEZgKxp.txt",
                "size": "39 bytes"
            },
            {
                "name": "bFZK7JE.txt",
                "size": "34 bytes"
            },
            {
                "name": "s7Bi95.txt",
                "size": "40 bytes"
            },
            {
                "name": "lMaKS0pFE.txt",
                "size": "37 bytes"
            },
            {
                "name": "eBvP6.txt",
                "size": "29 bytes"
            },
            {
                "name": "nwj3Y.txt",
                "size": "37 bytes"
            },
            {
                "name": "zV3vZog2.txt",
                "size": "26 bytes"
            },
            {
                "name": "qLKyjkE.txt",
                "size": "26 bytes"
            },
            {
                "name": "uZvrWoJP7pHE.txt",
                "size": "44 bytes"
            },
            {
                "name": "zl4tbDdS.txt",
                "size": "45 bytes"
            },
            {
                "name": "5BY4Ct.txt",
                "size": "25 bytes"
            },
            {
                "name": "xacRid5rY.txt",
                "size": "36 bytes"
            },
            {
                "name": "9LJd16jNoBH.txt",
                "size": "42 bytes"
            },
            {
                "name": "DrSQAp.txt",
                "size": "20 bytes"
            },
            {
                "name": "XqNsa.txt",
                "size": "21 bytes"
            },
            {
                "name": "ah6BWukYdr0.txt",
                "size": "24 bytes"
            },
            {
                "name": "BvnYdSa.txt",
                "size": "31 bytes"
            },
            {
                "name": "x7DkSqNearo.txt",
                "size": "28 bytes"
            },
            {
                "name": "I1cLmgNxW5GA.txt",
                "size": "30 bytes"
            },
            {
                "name": "Wkg70bTa.txt",
                "size": "33 bytes"
            },
            {
                "name": "v8K6Iotwpe.txt",
                "size": "45 bytes"
            },
            {
                "name": "N3dlMw2.txt",
                "size": "33 bytes"
            },
            {
                "name": "YS8tHd3.txt",
                "size": "38 bytes"
            },
            {
                "name": "folderStructure",
                "size": "76 bytes"
            },
            {
                "name": "YlcLa9o32MKu.txt",
                "size": "21 bytes"
            },
            {
                "name": "rRfkguMPyG1.txt",
                "size": "36 bytes"
            },
            {
                "name": "TZzU4VXp.txt",
                "size": "31 bytes"
            },
            {
                "name": "2uLsnJMPXS9.txt",
                "size": "30 bytes"
            },
            {
                "name": "VJBj8RUDKhm.txt",
                "size": "27 bytes"
            },
            {
                "name": "Tgy5hwXHW.txt",
                "size": "31 bytes"
            },
            {
                "name": "gXNhv6Bs0jo.txt",
                "size": "29 bytes"
            },
            {
                "name": "yuJt9.txt",
                "size": "36 bytes"
            },
            {
                "name": "qT6CGP.txt",
                "size": "23 bytes"
            },
            {
                "name": "K8vq1LBl.txt",
                "size": "26 bytes"
            },
            {
                "name": "d2s5P07aHw.txt",
                "size": "33 bytes"
            },
            {
                "name": "2QtEi.txt",
                "size": "36 bytes"
            },
            {
                "name": "3sv8phi.txt",
                "size": "32 bytes"
            },
            {
                "name": "3197qPQDFU.txt",
                "size": "23 bytes"
            },
            {
                "name": "fQ2DTt9ELcs.txt",
                "size": "37 bytes"
            },
            {
                "name": "Tap4iQeM.txt",
                "size": "29 bytes"
            },
            {
                "name": "EScU51m4fbV.txt",
                "size": "37 bytes"
            },
            {
                "name": "g0NVcLqr.txt",
                "size": "28 bytes"
            },
            {
                "name": "Fio.1.0",
                "size": "1073741824 bytes"
            },
            {
                "name": "Du9dXUwRZzvG.txt",
                "size": "40 bytes"
            },
            {
                "name": "cVm6s9uYv1.txt",
                "size": "45 bytes"
            },
            {
                "name": "vQ7C9c.txt",
                "size": "28 bytes"
            },
            {
                "name": "VwZMaUeLJvr.txt",
                "size": "36 bytes"
            },
            {
                "name": "iLfQ9xIePb.txt",
                "size": "24 bytes"
            },
            {
                "name": "HXUx6sePu3Bh.txt",
                "size": "38 bytes"
            },
            {
                "name": "iItF5Cpe.txt",
                "size": "34 bytes"
            },
            {
                "name": "fRhrvGuyYc.txt",
                "size": "36 bytes"
            },
            {
                "name": "eU9Fp.txt",
                "size": "38 bytes"
            },
            {
                "name": "GDlbzPtArO.txt",
                "size": "21 bytes"
            },
            {
                "name": "ljVGTJmDW.txt",
                "size": "37 bytes"
            },
            {
                "name": "tiV17TZ.txt",
                "size": "22 bytes"
            },
            {
                "name": "6JoZH.txt",
                "size": "21 bytes"
            },
            {
                "name": "3qrkEK.txt",
                "size": "34 bytes"
            }
        ]
    }
</script>
	<title id="title">EFS File Browser</title>
	<style>
		body {
			font-family: Courier, Arial;
			font-size: 95%;
		}
		.stripebox {
			border-bottom: solid black 0px;
			background-color: WhiteSmoke;
		}
		.stripebox h1 {
			font-family: Courier, Arial;
			font-size: 2.5em;
			margin-bottom: 5px;
		}
		.stripecontent {
			font-family: Arial;
			padding-left: 23px;
			padding-bottom: 12px;
		}
		#credit {
			float: right;
			color: #909090;
			padding-right: 10px;
		}
		#filehead, #tree {
			padding-left: 23px;
		}
		a.control:link, a.control:active,
		a.control:hover, a.control:visited {
			color: blue;
		}
		ul.tree li {
			list-style-type: none;
			position: relative;
		}
		ul.tree li ul {
			display: none;
			padding-left: 15px
		}
		ul.tree li.open > ul {
			display: block;
		}
		ul.tree li a {
			color: black;
			text-decoration: none;
		}
		ul.tree li a:before { /* the expand/collapse symbols before each item */
			height: 1em;
			font-size: .8em;
			display: block;
			position: absolute;
			left: -1.2em;
			top: .05em;
		}
		ul.tree li > a:not(:last-child):before {
			content: '⊞';
			font-weight: bold;
		}
		ul.tree li.open > a:not(:last-child):before {
			content: '⊟';
			font-weight: normal;
		}
		ul.tree li.open > a:last-child:before {
			content: '';
			font-weight: bold;
		}
		ul.tree li:before, ul.tree li:after {
			position: absolute;
    	left: -0.7em;
			border-style: dotted;
			border-color: #909090;
			border-width: 0px;
		}
		ul.tree li:before {
			content: "";
			border-top-width: 1px;
			height: 0;
			width: 8px;
			top: 9px;
		}
		ul.tree li:after {
			content: "";
			border-left-width: 1px;
			height: 100%;
			width: 0px;
			top: 2px;
		}
		ul.tree > li::before {
    	width: 0px;
		}
		ul.tree > li::after {
    	height: 0px;
		}
		ul.tree > li li:last-child:after {
    	height: 8px;
		}
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script>
		var selected;
		var showFocus = function () {
			selected.firstElementChild.style.color = "SlateBlue";
		}
		var hideFocus = function () {
			selected.firstElementChild.style.color = "";
		}
		var clickSelected = function () {
			selected.firstElementChild.click();
		}
		var gotoPrevSibling = function () {
			hideFocus();
			if (selected.previousElementSibling) { selected = selected.previousElementSibling; }
			else if (selected.parentElement.previousElementSibling) {
				liElems = selected.parentElement.previousElementSibling.getElementsByTagName("li");
				if (liElems.length) { selected = liElems[0]; }
			}
			showFocus();
		};
		var gotoNextSibling = function () {
			hideFocus();
			if (selected.nextElementSibling) { selected = selected.nextElementSibling; }
			else if (selected.parentElement.nextElementSibling) {
				liElems = selected.parentElement.nextElementSibling.getElementsByTagName("li");
				if (liElems.length) { selected = liElems[0]; }
			}
			showFocus();
		}
		var gotoFirstChild = function () {
			hideFocus();
			firstSub = selected.getElementsByTagName("ul")[0];
			if (firstSub) {
				selected = firstSub.getElementsByTagName("li")[0];
			}
			showFocus();
		}
		var gotoParent = function () {
			hideFocus();
			if (selected.parentElement && selected.parentElement.parentElement && selected.parentElement.parentElement.id != "tree") {
				selected = selected.parentElement.parentElement;
			}
			showFocus();
		}
		var onLoad = function() {
			// 1. HTML document title
			var filename = document.getElementById('filename').innerHTML;
			document.getElementById('title').innerHTML = "EFS (" + filename + ")";

			// 2. render tree structure -- you may make number of sections dynamic insteaf of fixed
			section1 = document.getElementById('section1');
            section1.innerHTML = renderJSON(JSON.parse(document.getElementById('section1JSON').innerHTML));
            // $.ajax({
            //     type: "GET",
            //     url: "https://toiqj8cvu9.execute-api.us-east-1.amazonaws.com/prod/filelist",
            //     dataType: "json",
            //     success: function(data) {
            //         console.log(data);
            //         section1.innerHTML = renderJSON(JSON.parse(data.body));
            //     }
            // });

			// 3. selection box, default on the first item on the tree
			selected = document.getElementById('tree').firstElementChild.getElementsByTagName("li")[0];
			showFocus();

			// 4. click handlers
			var treeListItems = document.querySelectorAll('ul.tree a');
			for (var i = 0; i < treeListItems.length; i++) {
				// click handler
				treeListItems[i].addEventListener('click', function(e) {
					var parent = e.target.parentElement;
					hideFocus();
					selected = parent;
					showFocus();
					var classList = parent.classList;
					if (classList.contains("open")) { // close the element and its children
						classList.remove('open');
						var openChildrenList = parent.querySelectorAll(':scope .open');
						for (var j = 0; j < openChildrenList.length; j++) {
							openChildrenList[j].classList.remove('open');
						}
					} else { // open the element
						classList.add('open');
					}
				});
			}

			// 5. keyboard handler
			document.addEventListener('keydown', function(e) {
					switch (e.key) {
						case "Enter": case " ":
							actExpandCollapse();
							break;
						case "ArrowDown":
							gotoNextSibling();
							break;
						case "ArrowUp":
							gotoPrevSibling();
							break;
						case "ArrowRight":
							if (selected.classList.contains("open") === false) { clickSelected(); }
							gotoFirstChild();
							break;
						case "ArrowLeft":
							if (selected.classList.contains("open") === true) { clickSelected(); }
							gotoParent();
							break;
					}
				});
		};

		var expandAll = function() {
			var allListItems = document.querySelectorAll('ul.tree li');
			for (var k = 0; k < allListItems.length; k++) {
				allListItems[k].classList.add("open");
			}
		};
		var collapseAll = function() {
			window.location.reload();
		};
		var EXPAND_ALL = "Expand All";
		var COLLAPSE_ALL = "Collapse All";
		var actExpandCollapse = function() {
			var botton = document.getElementById("expand");
			if (botton.innerHTML === EXPAND_ALL) {
				expandAll();
				botton.innerHTML = COLLAPSE_ALL;
			} else {
				collapseAll();
				botton.innerHTML = EXPAND_ALL;
			}
		};

		function renderJSON(obj) {
			var keys = [];
			var objIsArray = Array.isArray(obj); // check if [..] array. Otherwise, it is an ordinary {..} object
			jsonText = "";
			for (var key in obj) {
					if (typeof obj[key] === 'object') {
							if (objIsArray === false) { jsonText += "<li><a href='#'>" + key + "</a><ul>"; }
							jsonText += renderJSON(obj[key]);
							if (objIsArray === false) { jsonText += "</ul></li>"; }
					} else { // obj[key] not object, e.g. just a number or string, or empty
						if (objIsArray === false) {
							jsonText += "<li><a href='#'>" + key;
							if (obj[key]) { jsonText += ": " + obj[key]; }
							jsonText += "</a></li>";
						} else {
							jsonText += "<li><a href='#'>";
							if (obj[key]) { jsonText += obj[key]; } else { jsonText += "(empty)"; }
							jsonText += "</a></li>";
						}
					}

					keys.push(key);
			}
			return jsonText;
	  }
	</script>
</head>

<body onload="onLoad()">
<div class="stripebox">
	<div class="stripecontent">
		<h1>EFS File Browser</h1>
		<span>Click individual nodes or use arrow keys to navigate.</span>
		<a class="control" id="expand" href="#" onClick="actExpandCollapse()" title="Enter or Space key">Expand All</a>
	</div>
</div>

<p id="filehead">
	Folder: <span id="filename">/mnt/demo</span>
</p>
<div id="tree">

<ul id="section1" class="tree"></ul>
</div>
</body>
</html>
